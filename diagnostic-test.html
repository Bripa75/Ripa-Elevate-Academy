<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1.0"/>
<title>Ripa Elevate — Adaptive Diagnostic (Demo)</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
<meta name="robots" content="noindex">
<style>
:root{
  --bg:#070a12; --text:#eef2fb; --muted:#b7c0d9;
  --glass:rgba(255,255,255,.06); --stroke:rgba(255,255,255,.12);
  --accentA:#67e8f9; --accentB:#a78bfa; --glow:0 0 60px rgba(103,232,249,.35);
  --radius:18px;
}
*{box-sizing:border-box}
html,body{margin:0;height:100%;background:var(--bg);color:var(--text);font-family:Poppins,system-ui,Segoe UI,Roboto,Arial,sans-serif}
a{color:inherit;text-decoration:none}
.container{width:min(1100px,92%);margin:0 auto}
header{position:sticky;top:0;z-index:20;backdrop-filter:blur(10px) saturate(140%);
  background:linear-gradient(180deg, rgba(7,10,18,.85), rgba(7,10,18,.5));border-bottom:1px solid var(--stroke)}
header .row{display:flex;align-items:center;justify-content:space-between;padding:14px 0}
.brand{display:flex;align-items:center;gap:10px;font-weight:700}
.orb{width:12px;height:12px;border-radius:50%;background:linear-gradient(135deg,var(--accentA),var(--accentB));box-shadow:var(--glow)}
nav a{padding:10px 12px;border-radius:12px}
.hero{padding:70px 0 20px;text-align:center}
h1{font-size:clamp(28px,5vw,52px);margin:0 0 10px}
.txt-grad{background:linear-gradient(90deg,var(--accentA),var(--accentB));-webkit-background-clip:text;background-clip:text;color:transparent}
.sub{color:var(--muted);margin:0 auto 16px;width:min(800px,92%)}
.btn{display:inline-flex;align-items:center;gap:10px;padding:12px 16px;border-radius:14px;border:1px solid var(--stroke);
  background:var(--glass);font-weight:600;cursor:pointer}
.btn.primary{background:linear-gradient(135deg, rgba(103,232,249,.18), rgba(167,139,250,.18));box-shadow:var(--glow)}
section{padding:40px 0}
.stage{background:var(--glass);border:1px solid var(--stroke);border-radius:18px;padding:18px;display:grid;grid-template-columns:1.1fr .9fr;gap:16px}
.card{background:var(--glass);border:1px solid var(--stroke);border-radius:18px;padding:16px}
.qtext{font-size:18px;margin:8px 0 12px}
.choices{display:grid;gap:10px}
.choices button{padding:12px 14px;border-radius:12px;border:1px solid var(--stroke);background:rgba(255,255,255,.05);color:var(--text);text-align:left;font-weight:600;cursor:pointer}
.choices button:hover{background:rgba(255,255,255,.09)}
.kpis{display:grid;grid-template-columns:repeat(3,1fr);gap:10px}
.kpi{background:var(--glass);border:1px solid var(--stroke);border-radius:12px;padding:10px;text-align:center}
.kpi .cap{color:var(--muted);font-size:12px}
.kpi .num{font-weight:700;font-size:20px}
.progBar{height:10px;background:rgba(255,255,255,.12);border-radius:999px;overflow:hidden}
.progFill{height:100%;width:0%;background:linear-gradient(90deg,var(--accentA),var(--accentB));transition:width .35s ease}
.pills{display:flex;flex-wrap:wrap;gap:8px}
.pill{padding:6px 10px;border:1px solid var(--stroke);border-radius:999px;background:rgba(255,255,255,.05);font-size:12px}
h3{margin:0 0 8px}
.reportGrid{display:grid;grid-template-columns:repeat(3,1fr);gap:10px}
.small{color:var(--muted);font-size:13px}
footer{border-top:1px solid var(--stroke);text-align:center;color:var(--muted);padding:28px 0 60px}

/* Modal */
.modalMask{position:fixed;inset:0;background:rgba(0,0,0,.5);backdrop-filter:blur(6px);display:flex;align-items:center;justify-content:center;z-index:50}
.modal{width:min(560px,92%);background:rgba(255,255,255,.06);border:1px solid var(--stroke);border-radius:18px;padding:18px}
.modal h2{margin:4px 0 6px}
.modal .row{display:flex;gap:10px;flex-wrap:wrap}
select,input[type=number]{background:rgba(255,255,255,.08);border:1px solid var(--stroke);color:var(--text);padding:10px;border-radius:12px}
@media(max-width:900px){.stage{grid-template-columns:1fr}}
</style>
</head>
<body>

<!-- HARD GUARD: block page if not unlocked -->
<script>
  (function () {
    try {
      const params = new URLSearchParams(location.search);
      const fromParam = params.get('access');
      if (fromParam === 'diag') {
        try { localStorage.setItem('rea_diag_paid', '1'); } catch (e) {}
      }
      const ok = localStorage.getItem('rea_diag_paid') === '1';
      if (!ok) location.replace('lock.html');
    } catch (e) {
      location.replace('lock.html');
    }
  })();
</script>

<!-- External helper (optional; cache-busted) -->
<script src="js/paywall.js?"></script>

<header>
  <div class="container">
    <div class="row">
      <div class="brand"><span class="orb"></span>Ripa Elevate Academy</div>
      <nav>
        <a href="/">Home</a>
        <a href="#exam">Free Diagnostic</a>
      </nav>
    </div>
  </div>
</header>

<main>
  <section class="hero">
    <div class="container">
      <h1>Instant <span class="txt-grad">Learning Scan</span> — Math & ELA</h1>
      <p class="sub">20 adaptive questions (from a 120+ item bank) that pinpoint level, compare to grade expectations, and produce a clear action plan—fast.</p>
      <a class="btn primary" href="#exam" id="openStart">Start Free Diagnostic</a>
    </div>
  </section>

  <section id="exam">
    <div class="container">
      <div class="stage">
        <!-- LEFT: Question -->
        <div class="card">
          <div style="display:flex;justify-content:space-between;align-items:flex-end;gap:12px">
            <div>
              <div class="small" id="domainNow">Math</div>
              <h3 id="sectionTitle" style="margin:0">Question 1</h3>
              <div class="small" id="sectionHint">We’ll adjust difficulty as you go.</div>
            </div>
            <div style="min-width:180px">
              <div class="small" id="progressText" style="text-align:center">0 / 20</div>
              <div class="progBar"><div class="progFill" id="progressFill"></div></div>
            </div>
          </div>
          <div class="qtext" id="qtext">Click “Start” to begin.</div>
          <div class="choices" id="choices"></div>
          <div style="margin-top:10px;display:flex;gap:10px;flex-wrap:wrap">
            <button class="btn" id="finishNow" type="button">Finish now</button>
            <button class="btn" id="startBtn" type="button">Start</button>
          </div>
        </div>

        <!-- RIGHT: Live indicators -->
        <div class="card">
          <h3 style="margin:0 0 6px">Live Indicators</h3>
          <div class="kpis" style="margin-bottom:10px">
            <div class="kpi"><div class="cap">Estimated Level</div><div class="num" id="estLevel">—</div></div>
            <div class="kpi"><div class="cap">Confidence</div><div class="num" id="confidence">—</div></div>
            <div class="kpi"><div class="cap">Domain</div><div class="num" id="domMini">—</div></div>
          </div>
          <div class="small">Strength signals</div>
          <div class="pills" id="strengths"></div>
          <div class="small" style="margin-top:10px">Priority signals</div>
          <div class="pills" id="needs"></div>
        </div>
      </div>

      <!-- REPORT -->
      <div class="card" id="report" style="display:none;margin-top:16px">
        <div style="display:flex;justify-content:space-between;align-items:center;gap:12px">
          <h3 style="margin:0">Instant Report</h3>
          <div style="display:flex;gap:8px;flex-wrap:wrap">
            <button class="btn" onclick="window.print()">Download PDF</button>
            <a class="btn" href="#exam" onclick="location.reload()">Restart</a>
          </div>
        </div>
        <p class="small">Estimated levels, confidence, grade expectations (NYC/NYS bands), strengths, priorities, and a targeted action plan.</p>

        <div class="reportGrid">
          <div class="kpi"><div class="cap">Math level</div><div class="num" id="mathLevel">—</div></div>
          <div class="kpi"><div class="cap">ELA level</div><div class="num" id="elaLevel">—</div></div>
          <div class="kpi"><div class="cap">Overall confidence</div><div class="num" id="confOut">—</div></div>
        </div>
        <div class="reportGrid" style="margin-top:10px">
          <div class="kpi"><div class="cap">Math expected (grade)</div><div class="num" id="mathExpected">—</div><div class="small" id="mathGap">—</div></div>
          <div class="kpi"><div class="cap">ELA expected (grade)</div><div class="num" id="elaExpected">—</div><div class="small" id="elaGap">—</div></div>
          <div class="kpi"><div class="cap">Grade selected</div><div class="num" id="gradeRef">—</div></div>
        </div>

        <div style="margin-top:12px">
          <div class="small">Strengths</div><div class="pills" id="strengthList"></div>
        </div>
        <div style="margin-top:8px">
          <div class="small">Priorities</div><div class="pills" id="needList"></div>
        </div>

        <div style="margin-top:12px">
          <label class="small" style="display:flex;align-items:center;gap:8px">
            <input type="checkbox" id="stdToggle"> Show standards details
          </label>
          <div id="stdDetails" class="small" style="display:none;margin-top:8px"></div>
        </div>

        <div style="margin-top:12px">
          <div class="small">Action plan</div>
          <ol id="planList" style="margin-top:8px"></ol>
        </div>
      </div>
    </div>
  </section>
</main>

<footer>
  © <span id="year"></span> Ripa Elevate Academy · Private by design
</footer>

<script>
// year
document.getElementById('year').textContent = new Date().getFullYear();

/* ------ the exam JS (unchanged) ------ */
/* (your long engine code stays here exactly as before) */
</script>
</body>
</html>

